---
import DocLayout from '../../../layouts/DocLayout.astro';
---

<DocLayout title="Tasks API" description="REST API endpoints for managing tasks in Yet.Project.">
  <h1>Tasks API</h1>

  <p>
    Endpoints for creating, reading, updating, and deleting tasks.
  </p>

  <h2>List Tasks</h2>

  <pre><code>GET /v1/tasks</code></pre>

  <h3>Query Parameters</h3>
  <table>
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>projectId</code></td>
        <td>string</td>
        <td>Filter by project</td>
      </tr>
      <tr>
        <td><code>status</code></td>
        <td>string</td>
        <td>Filter by status</td>
      </tr>
      <tr>
        <td><code>assignee</code></td>
        <td>string</td>
        <td>Filter by assignee ID</td>
      </tr>
      <tr>
        <td><code>priority</code></td>
        <td>string</td>
        <td>Filter by priority</td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td>string</td>
        <td>Filter by label</td>
      </tr>
      <tr>
        <td><code>page</code></td>
        <td>number</td>
        <td>Page number (default: 1)</td>
      </tr>
      <tr>
        <td><code>limit</code></td>
        <td>number</td>
        <td>Items per page (default: 50, max: 100)</td>
      </tr>
    </tbody>
  </table>

  <h3>Example</h3>
  <pre><code>{`curl "https://api.yet.watch/v1/tasks?projectId=proj_abc&status=todo" \\
  -H "Authorization: Bearer yet_xxx"`}</code></pre>

  <h2>Get Task</h2>

  <pre><code>GET /v1/tasks/:taskId</code></pre>

  <h3>Example</h3>
  <pre><code>{`curl https://api.yet.watch/v1/tasks/MYAPP-123 \\
  -H "Authorization: Bearer yet_xxx"`}</code></pre>

  <h3>Response</h3>
  <pre><code>{`{
  "data": {
    "id": "MYAPP-123",
    "projectId": "proj_abc123",
    "title": "Implement user authentication",
    "description": "Add JWT-based auth...",
    "status": "in_progress",
    "priority": "high",
    "assignee": {
      "id": "user_xyz",
      "name": "John Doe"
    },
    "labels": ["feature", "auth"],
    "createdAt": "2024-01-15T10:00:00Z",
    "updatedAt": "2024-01-15T14:30:00Z"
  }
}`}</code></pre>

  <h2>Create Task</h2>

  <pre><code>POST /v1/tasks</code></pre>

  <h3>Body</h3>
  <table>
    <thead>
      <tr>
        <th>Field</th>
        <th>Type</th>
        <th>Required</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>projectId</code></td>
        <td>string</td>
        <td>Yes</td>
        <td>Project to create task in</td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td>string</td>
        <td>Yes</td>
        <td>Task title</td>
      </tr>
      <tr>
        <td><code>description</code></td>
        <td>string</td>
        <td>No</td>
        <td>Detailed description</td>
      </tr>
      <tr>
        <td><code>status</code></td>
        <td>string</td>
        <td>No</td>
        <td>Initial status (default: todo)</td>
      </tr>
      <tr>
        <td><code>priority</code></td>
        <td>string</td>
        <td>No</td>
        <td>low, medium, high, urgent</td>
      </tr>
      <tr>
        <td><code>assigneeId</code></td>
        <td>string</td>
        <td>No</td>
        <td>User ID to assign</td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td>string[]</td>
        <td>No</td>
        <td>Array of labels</td>
      </tr>
      <tr>
        <td><code>dueDate</code></td>
        <td>string</td>
        <td>No</td>
        <td>ISO 8601 date</td>
      </tr>
    </tbody>
  </table>

  <h3>Example</h3>
  <pre><code>{`curl -X POST https://api.yet.watch/v1/tasks \\
  -H "Authorization: Bearer yet_xxx" \\
  -H "Content-Type: application/json" \\
  -d '{
    "projectId": "proj_abc123",
    "title": "Implement user authentication",
    "description": "Add JWT-based auth with refresh tokens",
    "priority": "high",
    "labels": ["feature", "auth"]
  }'`}</code></pre>

  <h2>Update Task</h2>

  <pre><code>PATCH /v1/tasks/:taskId</code></pre>

  <p>Update any task fields. Only include fields you want to change.</p>

  <h3>Example</h3>
  <pre><code>{`curl -X PATCH https://api.yet.watch/v1/tasks/MYAPP-123 \\
  -H "Authorization: Bearer yet_xxx" \\
  -H "Content-Type: application/json" \\
  -d '{
    "status": "done",
    "priority": "medium"
  }'`}</code></pre>

  <h2>Delete Task</h2>

  <pre><code>DELETE /v1/tasks/:taskId</code></pre>

  <h3>Example</h3>
  <pre><code>{`curl -X DELETE https://api.yet.watch/v1/tasks/MYAPP-123 \\
  -H "Authorization: Bearer yet_xxx"`}</code></pre>

  <h2>Search Tasks</h2>

  <pre><code>GET /v1/tasks/search</code></pre>

  <h3>Query Parameters</h3>
  <table>
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>q</code></td>
        <td>string</td>
        <td>Search query (searches title and description)</td>
      </tr>
      <tr>
        <td><code>projectId</code></td>
        <td>string</td>
        <td>Limit search to project</td>
      </tr>
    </tbody>
  </table>

  <h3>Example</h3>
  <pre><code>{`curl "https://api.yet.watch/v1/tasks/search?q=authentication" \\
  -H "Authorization: Bearer yet_xxx"`}</code></pre>

  <h2>Next Steps</h2>

  <ul>
    <li><a href="/docs/api/projects">Projects API</a></li>
    <li><a href="/docs/api/knowledge">Knowledge API</a></li>
    <li><a href="/docs/api/rate-limits">Rate Limits</a></li>
  </ul>
</DocLayout>
